<html>
    <head>
        <title>QR Scanner</title>
        <link rel="stylesheet" href="styles.css">
        <link rel="icon" href="web-icon.png">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script src="https://kit.fontawesome.com/e4995ec024.js" crossorigin="anonymous"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    </head>
    <body>
        <div class="info-wrapper close-info">
            <div class="info">
                <div class="close-info-btn"><i class="fa-solid fa-circle-xmark"></i></div>
                <div class="info-center">
                    <div class="result">
                        <div id="result"></div>
                    </div>
                </div>
            </div>
        </div>
        <!-- navigation bar -->
        <nav class="nav-bar">
            <div class="nav-center">
                <div class="logo">
                    <img src="logo.png" alt="logo">
                </div>
                <!-- <div class="burger-icon">=</div> -->
                <div class="nav-links">
                    <ul class="links">
                        <li><a href="#home">ホーム</a></li>
                        <li><a href="#analysis">分析</a></li>
                        <li><a href="#history">歴史</a></li>
                        <li><a href="#list">リスト</a></li>
                    </ul>
                </div>
                <div class="menu">
                    <a href="index.html"class="refresh-btn">晴らす</a>
                </div>
            </div>
        </nav>
        <div class="mobile-links">
            <div class="links-style">
                <ul class="mob-links-items">
                    <li><a href="#home">
                        <i class="fa-solid fa-house-chimney"></i>
                        <div>ホーム</div>
                    </a></li>
                    <li><a href="#analysis">
                        <i class="fa-solid fa-chart-column"></i>
                        <div>分析</div>
                    </a></li>
                    <li><a href="#history">
                        <i class="fa-solid fa-clock-rotate-left"></i>
                        <div>歴史</div>
                    </a></li>
                    <li><a href="#list">
                        <i class="fa-solid fa-list-ul"></i>
                        <div>リスト</div>
                    </a></li>
                </ul>
            </div>
        </div>
        <!-- content -->
        <div class="content-wrapper">
            <script src="html5-qrcode.min.js"></script>
            <div class="qr-wrapper">
                <div class="scanner">
                    <div style="width:auto;" id="reader"></div>
                </div>
            </div>
            <script type="text/javascript">
                const qrwrapper = document.querySelector(".qr-wrapper");
                function onScanSuccess(qrCodeMessage) {
                    const info = document.querySelector(".info-wrapper");
                    info.classList.remove("close-info");
                    document.getElementById('result').innerHTML = '<a href='+qrCodeMessage+' class="url" target="_blank"><span class="result">'+qrCodeMessage+'</span></a>';
                    qrwrapper.classList.add("close-info");
                }
                function onScanError(errorMessage) {
                    //handle scan error
                    // document.getElementById('result').innerHTML = '<span class="result">'+errorMessage+'</span>';
                }
                var html5QrcodeScanner = new Html5QrcodeScanner("reader", { fps: 10, qrbox: 250 });
                html5QrcodeScanner.render(onScanSuccess, onScanError);
            </script>
        </div>
        <script src="test_page_js.js"></script>
    </body>
</html>
